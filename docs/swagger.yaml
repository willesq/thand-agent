basePath: /api/v1
definitions:
  config.APIConfig:
    properties:
      rateLimit:
        $ref: '#/definitions/config.RateLimitConfig'
      version:
        default: v1
        type: string
    type: object
  config.CORSConfig:
    properties:
      allowedHeaders:
        items:
          type: string
        type: array
      allowedMethods:
        items:
          type: string
        type: array
      allowedOrigins:
        items:
          type: string
        type: array
      maxAge:
        type: integer
    type: object
  config.HealthConfig:
    properties:
      enabled:
        default: true
        type: boolean
      path:
        default: /health
        description: Don't use /healthz as it conflicts with google k8s health checks
        type: string
    type: object
  config.LoggingConfig:
    properties:
      format:
        default: text
        type: string
      level:
        default: info
        type: string
      output:
        type: string
    type: object
  config.LoginConfig:
    properties:
      apiKey:
        description: API key for authenticating with the login server
        type: string
      base:
        default: /
        description: Base path for login endpoint e.g. /
        type: string
      endpoint:
        default: https://auth.thand.io/
        type: string
    type: object
  config.MetricsConfig:
    properties:
      enabled:
        default: true
        type: boolean
      namespace:
        type: string
      path:
        default: /metrics
        type: string
    type: object
  config.ProviderConfig:
    properties:
      definitions:
        additionalProperties:
          $ref: '#/definitions/models.Provider'
        description: Load providers directly from config using mapstructure:",remain"
        type: object
      path:
        type: string
      plugins:
        allOf:
        - $ref: '#/definitions/config.ProviderPluginConfig'
        description: Load dynamic provider configs
      url:
        $ref: '#/definitions/model.Endpoint'
      vault:
        description: vault secret / path to use
        type: string
    type: object
  config.ProviderPlugin:
    type: object
  config.ProviderPluginConfig:
    properties:
      definitions:
        additionalProperties:
          $ref: '#/definitions/config.ProviderPlugin'
        description: Load providers directly from config using mapstructure:",remain"
        type: object
      path:
        type: string
      url:
        type: string
    type: object
  config.RateLimitConfig:
    properties:
      burst:
        type: integer
      requestsPerMinute:
        type: integer
    type: object
  config.ReadyConfig:
    properties:
      enabled:
        default: true
        type: boolean
      path:
        default: /ready
        type: string
    type: object
  config.RegistrationRequest:
    properties:
      environment:
        $ref: '#/definitions/models.EnvironmentConfig'
    type: object
  config.RegistrationResponse:
    properties:
      providers:
        $ref: '#/definitions/config.ProviderConfig'
      roles:
        $ref: '#/definitions/config.RoleConfig'
      services:
        $ref: '#/definitions/models.ServicesConfig'
      success:
        type: boolean
      workflows:
        $ref: '#/definitions/config.WorkflowConfig'
    type: object
  config.RoleConfig:
    properties:
      definitions:
        additionalProperties:
          $ref: '#/definitions/models.Role'
        description: Store everything in memory
        type: object
      path:
        type: string
      url:
        $ref: '#/definitions/model.Endpoint'
      vault:
        description: vault secret / path to use
        type: string
    type: object
  config.SecurityConfig:
    properties:
      cors:
        $ref: '#/definitions/config.CORSConfig'
    type: object
  config.ServerConfig:
    properties:
      health:
        $ref: '#/definitions/config.HealthConfig'
      host:
        type: string
      limits:
        $ref: '#/definitions/config.ServerLimitsConfig'
      metrics:
        $ref: '#/definitions/config.MetricsConfig'
      port:
        type: integer
      ready:
        $ref: '#/definitions/config.ReadyConfig'
      security:
        $ref: '#/definitions/config.SecurityConfig'
    type: object
  config.ServerLimitsConfig:
    properties:
      burst:
        type: integer
      idleTimeout:
        $ref: '#/definitions/time.Duration'
      readTimeout:
        $ref: '#/definitions/time.Duration'
      requestsPerMinute:
        type: integer
      writeTimeout:
        $ref: '#/definitions/time.Duration'
    type: object
  config.WorkflowConfig:
    properties:
      definitions:
        additionalProperties:
          $ref: '#/definitions/github_com_thand-io_agent_internal_models.Workflow'
        description: Store everything in memory
        type: object
      path:
        type: string
      plugins:
        allOf:
        - $ref: '#/definitions/config.WorkflowPluginConfig'
        description: Load dynamic plugin registry for custom call tools
      url:
        $ref: '#/definitions/model.Endpoint'
      vault:
        description: vault secret / path to use
        type: string
    type: object
  config.WorkflowPlugin:
    type: object
  config.WorkflowPluginConfig:
    properties:
      definitions:
        additionalProperties:
          $ref: '#/definitions/config.WorkflowPlugin'
        description: Store everything in memory
        type: object
      path:
        type: string
      url:
        type: string
    type: object
  daemon.ExecutionStatePageData:
    properties:
      execution:
        $ref: '#/definitions/models.WorkflowExecutionInfo'
      workflow:
        $ref: '#/definitions/model.Workflow'
    type: object
  daemon.ExecutionsPageData:
    properties:
      config:
        $ref: '#/definitions/github_com_thand-io_agent_internal_config.Config'
      executions:
        items:
          $ref: '#/definitions/models.WorkflowExecutionInfo'
        type: array
      provider:
        type: string
      serviceName:
        type: string
      status:
        type: string
      user:
        $ref: '#/definitions/github_com_thand-io_agent_internal_models.User'
      version:
        type: string
    type: object
  github_com_thand-io_agent_internal_config.Config:
    properties:
      api:
        $ref: '#/definitions/config.APIConfig'
      environment:
        allOf:
        - $ref: '#/definitions/models.EnvironmentConfig'
        description: Environment configuration and core services
      logging:
        $ref: '#/definitions/config.LoggingConfig'
      login:
        allOf:
        - $ref: '#/definitions/config.LoginConfig'
        description: System configuration
      providers:
        allOf:
        - $ref: '#/definitions/config.ProviderConfig'
        description: These are integration providers like AWS, GCP, etc.
      roles:
        allOf:
        - $ref: '#/definitions/config.RoleConfig'
        description: Workflow engine config
      secret:
        description: Secret used for signing cookies and tokens
        type: string
      server:
        $ref: '#/definitions/config.ServerConfig'
      services:
        allOf:
        - $ref: '#/definitions/models.ServicesConfig'
        description: External services / non-core services
      workflows:
        allOf:
        - $ref: '#/definitions/config.WorkflowConfig'
        description: These are workflows to run for role associated workflows
    type: object
  github_com_thand-io_agent_internal_models.User:
    properties:
      email:
        type: string
      groups:
        items:
          type: string
        type: array
      id:
        type: string
      name:
        type: string
      source:
        type: string
      username:
        type: string
      verified:
        type: boolean
    type: object
  github_com_thand-io_agent_internal_models.Workflow:
    properties:
      description:
        type: string
      enabled:
        default: true
        description: By default enable the workflow
        type: boolean
      name:
        type: string
      workflow:
        $ref: '#/definitions/model.Workflow'
    type: object
  model.AuthenticationPolicy:
    properties:
      basic:
        $ref: '#/definitions/model.BasicAuthenticationPolicy'
      bearer:
        $ref: '#/definitions/model.BearerAuthenticationPolicy'
      digest:
        $ref: '#/definitions/model.DigestAuthenticationPolicy'
      oauth2:
        $ref: '#/definitions/model.OAuth2AuthenticationPolicy'
      oidc:
        $ref: '#/definitions/model.OpenIdConnectAuthenticationPolicy'
    type: object
  model.BackoffDefinition:
    properties:
      definition:
        additionalProperties: true
        type: object
    type: object
  model.BasicAuthenticationPolicy:
    properties:
      password:
        type: string
      use:
        type: string
      username:
        type: string
    type: object
  model.BearerAuthenticationPolicy:
    properties:
      token:
        type: string
      use:
        type: string
    type: object
  model.Catalog:
    properties:
      endpoint:
        $ref: '#/definitions/model.Endpoint'
    required:
    - endpoint
    type: object
  model.Correlation:
    properties:
      expect:
        description: Expected value or runtime expression
        type: string
      from:
        description: Runtime expression to extract the correlation value
        type: string
    required:
    - from
    type: object
  model.DigestAuthenticationPolicy:
    properties:
      password:
        type: string
      use:
        type: string
      username:
        type: string
    type: object
  model.Document:
    properties:
      dsl:
        type: string
      metadata:
        additionalProperties: true
        type: object
      name:
        type: string
      namespace:
        type: string
      summary:
        type: string
      tags:
        additionalProperties:
          type: string
        type: object
      title:
        type: string
      version:
        type: string
    required:
    - dsl
    - name
    - namespace
    - version
    type: object
  model.Duration:
    type: object
  model.Endpoint:
    type: object
  model.Error:
    properties:
      detail:
        allOf:
        - $ref: '#/definitions/model.StringOrRuntimeExpr'
        description: A human-readable explanation specific to this occurrence of the
          error.
      instance:
        allOf:
        - $ref: '#/definitions/model.JsonPointerOrRuntimeExpression'
        description: |-
          A JSON Pointer used to reference the component the error originates from.
          Runtimes MUST set the property when raising or escalating the error. Otherwise ignore.
      status:
        description: |-
          The status code generated by the origin for this occurrence of the error.
          For cross-compatibility concerns, it is strongly recommended to use HTTP Status Codes whenever possible.
          Runtimes MUST ensure that the property has been set when raising or escalating the error.
        type: integer
      title:
        allOf:
        - $ref: '#/definitions/model.StringOrRuntimeExpr'
        description: A short, human-readable summary of the error.
      type:
        allOf:
        - $ref: '#/definitions/model.URITemplateOrRuntimeExpr'
        description: |-
          A URI reference that identifies the error type.
          For cross-compatibility concerns, it is strongly recommended to use Standard Error Types whenever possible.
          Runtimes MUST ensure that the property has been set when raising or escalating the error.
    required:
    - status
    - type
    type: object
  model.EventConsumptionStrategy:
    properties:
      all:
        items:
          $ref: '#/definitions/model.EventFilter'
        type: array
      any:
        items:
          $ref: '#/definitions/model.EventFilter'
        type: array
      one:
        $ref: '#/definitions/model.EventFilter'
      until:
        $ref: '#/definitions/model.EventConsumptionUntil'
    type: object
  model.EventConsumptionUntil:
    type: object
  model.EventFilter:
    properties:
      correlate:
        additionalProperties:
          $ref: '#/definitions/model.Correlation'
        description: Keyed correlation filters
        type: object
      with:
        $ref: '#/definitions/model.EventProperties'
    required:
    - with
    type: object
  model.EventProperties:
    properties:
      datacontenttype:
        type: string
      dataschema:
        allOf:
        - $ref: '#/definitions/model.URITemplateOrRuntimeExpr'
        description: URI template or runtime expression
      id:
        type: string
      source:
        allOf:
        - $ref: '#/definitions/model.URITemplateOrRuntimeExpr'
        description: URI template or runtime expression
      subject:
        type: string
      time:
        allOf:
        - $ref: '#/definitions/model.StringOrRuntimeExpr'
        description: ISO 8601 date-time string or runtime expression
      type:
        type: string
    type: object
  model.ExtensionItem:
    type: object
  model.ExternalResource:
    properties:
      endpoint:
        $ref: '#/definitions/model.Endpoint'
      name:
        type: string
    required:
    - endpoint
    type: object
  model.Input:
    properties:
      from:
        $ref: '#/definitions/model.ObjectOrRuntimeExpr'
      schema:
        $ref: '#/definitions/model.Schema'
    type: object
  model.JsonPointerOrRuntimeExpression:
    type: object
  model.NamedTaskMap:
    additionalProperties: {}
    type: object
  model.OAuth2AutenthicationDataClient:
    properties:
      assertion:
        type: string
      authentication:
        $ref: '#/definitions/model.OAuthClientAuthenticationType'
      id:
        type: string
      secret:
        type: string
    type: object
  model.OAuth2AuthenticationDataGrant:
    enum:
    - authorization_code
    - client_credentials
    - password
    - refresh_token
    - urn:ietf:params:oauth:grant-type:token-exchange
    type: string
    x-enum-comments:
      TokenExchangeGrant: '#nosec G101'
    x-enum-descriptions:
    - ""
    - ""
    - ""
    - ""
    - '#nosec G101'
    x-enum-varnames:
    - AuthorizationCodeGrant
    - ClientCredentialsGrant
    - PasswordGrant
    - RefreshTokenGrant
    - TokenExchangeGrant
  model.OAuth2AuthenticationPolicy:
    properties:
      endpoints:
        $ref: '#/definitions/model.OAuth2Endpoints'
      properties:
        $ref: '#/definitions/model.OAuth2AuthenticationProperties'
      use:
        type: string
    type: object
  model.OAuth2AuthenticationProperties:
    properties:
      actor:
        $ref: '#/definitions/model.OAuth2Token'
      audiences:
        items:
          type: string
        type: array
      authority: {}
      client:
        $ref: '#/definitions/model.OAuth2AutenthicationDataClient'
      grant:
        allOf:
        - $ref: '#/definitions/model.OAuth2AuthenticationDataGrant'
        enum:
        - authorization_code
        - client_credentials
        - password
        - refresh_token
        - urn:ietf:params:oauth:grant-type:token-exchange
      issuers:
        items:
          type: string
        type: array
      password:
        type: string
      request:
        $ref: '#/definitions/model.OAuth2TokenRequest'
      scopes:
        items:
          type: string
        type: array
      subject:
        $ref: '#/definitions/model.OAuth2Token'
      username:
        type: string
    type: object
  model.OAuth2Endpoints:
    properties:
      introspection:
        type: string
      revocation:
        type: string
      token:
        type: string
    type: object
  model.OAuth2Token:
    properties:
      token:
        description: Token The security token to use
        type: string
      type:
        description: Type The type of the security token to use.
        type: string
    type: object
  model.OAuth2TokenRequest:
    properties:
      encoding:
        $ref: '#/definitions/model.OAuth2TokenRequestEncodingType'
    type: object
  model.OAuth2TokenRequestEncodingType:
    enum:
    - application/x-www-form-urlencoded
    - application/json
    type: string
    x-enum-varnames:
    - EncodingTypeFormUrlEncoded
    - EncodingTypeApplicationJson
  model.OAuthClientAuthenticationType:
    enum:
    - client_secret_basic
    - client_secret_post
    - client_secret_jwt
    - private_key_jwt
    - none
    type: string
    x-enum-varnames:
    - OAuthClientAuthClientSecretBasic
    - OAuthClientAuthClientSecretPost
    - OAuthClientAuthClientSecretJWT
    - OAuthClientAuthPrivateKeyJWT
    - OAuthClientAuthNone
  model.ObjectOrRuntimeExpr:
    type: object
  model.OpenIdConnectAuthenticationPolicy:
    properties:
      properties:
        $ref: '#/definitions/model.OAuth2AuthenticationProperties'
      use:
        type: string
    type: object
  model.Output:
    properties:
      as:
        $ref: '#/definitions/model.ObjectOrRuntimeExpr'
      schema:
        $ref: '#/definitions/model.Schema'
    type: object
  model.RetryBackoff:
    properties:
      constant:
        $ref: '#/definitions/model.BackoffDefinition'
      exponential:
        $ref: '#/definitions/model.BackoffDefinition'
      linear:
        $ref: '#/definitions/model.BackoffDefinition'
    type: object
  model.RetryLimit:
    properties:
      attempt:
        $ref: '#/definitions/model.RetryLimitAttempt'
      duration:
        $ref: '#/definitions/model.Duration'
    type: object
  model.RetryLimitAttempt:
    properties:
      count:
        type: integer
      duration:
        $ref: '#/definitions/model.Duration'
    type: object
  model.RetryPolicy:
    properties:
      backoff:
        $ref: '#/definitions/model.RetryBackoff'
      delay:
        $ref: '#/definitions/model.Duration'
      exceptWhen:
        $ref: '#/definitions/model.RuntimeExpression'
      jitter:
        $ref: '#/definitions/model.RetryPolicyJitter'
      limit:
        $ref: '#/definitions/model.RetryLimit'
      when:
        $ref: '#/definitions/model.RuntimeExpression'
    type: object
  model.RetryPolicyJitter:
    properties:
      from:
        $ref: '#/definitions/model.Duration'
      to:
        $ref: '#/definitions/model.Duration'
    required:
    - from
    - to
    type: object
  model.RuntimeExpression:
    type: object
  model.Schedule:
    properties:
      after:
        $ref: '#/definitions/model.Duration'
      cron:
        type: string
      every:
        $ref: '#/definitions/model.Duration'
      "on":
        $ref: '#/definitions/model.EventConsumptionStrategy'
    type: object
  model.Schema:
    properties:
      document: {}
      format:
        type: string
      resource:
        $ref: '#/definitions/model.ExternalResource'
    type: object
  model.StringOrRuntimeExpr:
    type: object
  model.TaskItem:
    type: object
  model.Timeout:
    properties:
      after:
        allOf:
        - $ref: '#/definitions/model.Duration'
        description: After The duration after which to timeout
    required:
    - after
    type: object
  model.TimeoutOrReference:
    type: object
  model.URITemplateOrRuntimeExpr:
    type: object
  model.Use:
    properties:
      authentications:
        additionalProperties:
          $ref: '#/definitions/model.AuthenticationPolicy'
        type: object
      catalogs:
        additionalProperties:
          $ref: '#/definitions/model.Catalog'
        type: object
      errors:
        additionalProperties:
          $ref: '#/definitions/model.Error'
        type: object
      extensions:
        items:
          $ref: '#/definitions/model.ExtensionItem'
        type: array
      functions:
        $ref: '#/definitions/model.NamedTaskMap'
      retries:
        additionalProperties:
          $ref: '#/definitions/model.RetryPolicy'
        type: object
      secrets:
        items:
          type: string
        type: array
      timeouts:
        additionalProperties:
          $ref: '#/definitions/model.Timeout'
        type: object
    type: object
  model.Workflow:
    properties:
      do:
        items:
          $ref: '#/definitions/model.TaskItem'
        type: array
      document:
        $ref: '#/definitions/model.Document'
      input:
        $ref: '#/definitions/model.Input'
      output:
        $ref: '#/definitions/model.Output'
      schedule:
        $ref: '#/definitions/model.Schedule'
      timeout:
        $ref: '#/definitions/model.TimeoutOrReference'
      use:
        $ref: '#/definitions/model.Use'
    required:
    - do
    - document
    type: object
  models.AuthorizeUser:
    properties:
      code:
        type: string
      redirect_uri:
        type: string
      scopes:
        items:
          type: string
        type: array
      state:
        type: string
    type: object
  models.BasicConfig:
    additionalProperties: {}
    type: object
  models.ElevateLLMRequest:
    properties:
      reason:
        type: string
    type: object
  models.ElevateRequest:
    properties:
      authenticator:
        description: Which provider to use for authentication
        type: string
      duration:
        description: Duration in ISO 8601 format
        type: string
      identities:
        description: Optional identities to elevate, if empty the requesting user
          is used
        items:
          type: string
        type: array
      providers:
        description: A role can be applied to multiple providers
        items:
          type: string
        type: array
      reason:
        type: string
      role:
        $ref: '#/definitions/models.Role'
      session:
        $ref: '#/definitions/models.LocalSession'
      workflow:
        type: string
    type: object
  models.EnvironmentConfig:
    properties:
      architecture:
        default: amd64
        description: amd64, arm64
        type: string
      config:
        allOf:
        - $ref: '#/definitions/models.BasicConfig'
        description: Settings for the platform
      ephemeral:
        default: false
        description: true if running in an ephemeral environment
        type: boolean
      metaData:
        allOf:
        - $ref: '#/definitions/models.BasicConfig'
        description: Metadata for the environment
      name:
        default: development
        description: This is the name of the environment or hostname
        type: string
      operatingSystem:
        default: linux
        description: Operating System details
        type: string
      operatingSystemVersion:
        default: latest
        description: e.g. 10, 11, 12 for macOS
        type: string
      platform:
        allOf:
        - $ref: '#/definitions/models.EnvironmentPlatform'
        default: aws
        description: AWS, GCP, Kubernetes, Local
    type: object
  models.EnvironmentPlatform:
    enum:
    - aws
    - gcp
    - azure
    - kubernetes
    - local
    type: string
    x-enum-varnames:
    - AWS
    - GCP
    - Azure
    - Kubernetes
    - Local
  models.HealthResponse:
    properties:
      path:
        type: string
      services:
        additionalProperties:
          $ref: '#/definitions/models.HealthState'
        type: object
      status:
        $ref: '#/definitions/models.HealthState'
      timestamp:
        type: string
      version:
        type: string
    type: object
  models.HealthState:
    enum:
    - healthy
    - degraded
    - unhealthy
    type: string
    x-enum-varnames:
    - HealthStatusHealthy
    - HealthStatusDegraded
    - HealthStatusUnhealthy
  models.LargeLanguageModelConfig:
    properties:
      apikey:
        type: string
      baseURL:
        description: e.g. https://api.openai.com/v1
        type: string
      model:
        description: e.g. gpt-4, gpt-3.5-turbo, etc
        type: string
      provider:
        description: e.g. openai, azure, etc
        enum:
        - openai
        - gemini
        - anthropic
        type: string
    type: object
  models.LocalSession:
    properties:
      expiry:
        description: Expiry time of the session
        type: string
      session:
        description: Encoded session token
        type: string
      version:
        description: Version of the session config
        type: integer
    type: object
  models.MetricsInfo:
    properties:
      elevate_requests:
        type: integer
      providers_count:
        type: integer
      roles_count:
        type: integer
      total_requests:
        type: integer
      uptime:
        type: string
      workflows_count:
        type: integer
    type: object
  models.Permissions:
    properties:
      allow:
        items:
          type: string
        type: array
      deny:
        items:
          type: string
        type: array
    type: object
  models.Provider:
    properties:
      config:
        allOf:
        - $ref: '#/definitions/models.BasicConfig'
        description: Provider-specific configuration
      description:
        type: string
      enabled:
        description: Whether this provider is enabled
        type: boolean
      name:
        type: string
      provider:
        description: e.g. aws, gcp, azure
        type: string
      role:
        allOf:
        - $ref: '#/definitions/models.Role'
        description: The base role for this provider
    type: object
  models.ProviderPermission:
    properties:
      description:
        type: string
      name:
        type: string
      title:
        type: string
    type: object
  models.ProviderPermissionsResponse:
    properties:
      permissions:
        items:
          $ref: '#/definitions/models.ProviderPermission'
        type: array
      provider:
        type: string
      version:
        type: string
    type: object
  models.ProviderResponse:
    properties:
      description:
        type: string
      enabled:
        type: boolean
      name:
        type: string
      provider:
        description: e.g. aws, gcp, azure
        type: string
    type: object
  models.ProviderRole:
    properties:
      description:
        type: string
      id:
        type: string
      name:
        type: string
      title:
        type: string
    type: object
  models.ProviderRolesResponse:
    properties:
      provider:
        type: string
      roles:
        items:
          $ref: '#/definitions/models.ProviderRole'
        type: array
      version:
        type: string
    type: object
  models.ProvidersResponse:
    properties:
      providers:
        additionalProperties:
          $ref: '#/definitions/models.ProviderResponse'
        type: object
      version:
        type: string
    type: object
  models.Resources:
    properties:
      allow:
        items:
          type: string
        type: array
      deny:
        items:
          type: string
        type: array
    type: object
  models.Role:
    properties:
      authenticators:
        description: All the auth providers that the role can use. If empty then any
          provider can be used
        items:
          type: string
        type: array
      description:
        type: string
      enabled:
        default: true
        description: By default enable the role
        type: boolean
      inherits:
        items:
          type: string
        type: array
      name:
        type: string
      permissions:
        $ref: '#/definitions/models.Permissions'
      providers:
        items:
          type: string
        type: array
      resources:
        $ref: '#/definitions/models.Resources'
      scopes:
        $ref: '#/definitions/models.RoleScopes'
      workflows:
        description: The workflows to execute
        items:
          type: string
        type: array
    type: object
  models.RoleResponse:
    properties:
      authenticators:
        description: All the auth providers that the role can use. If empty then any
          provider can be used
        items:
          type: string
        type: array
      description:
        type: string
      enabled:
        default: true
        description: By default enable the role
        type: boolean
      inherits:
        items:
          type: string
        type: array
      name:
        type: string
      permissions:
        $ref: '#/definitions/models.Permissions'
      providers:
        items:
          type: string
        type: array
      resources:
        $ref: '#/definitions/models.Resources'
      scopes:
        $ref: '#/definitions/models.RoleScopes'
      workflows:
        description: The workflows to execute
        items:
          type: string
        type: array
    type: object
  models.RoleScopes:
    properties:
      groups:
        items:
          type: string
        type: array
      users:
        items:
          type: string
        type: array
    type: object
  models.RolesResponse:
    properties:
      roles:
        additionalProperties:
          $ref: '#/definitions/models.RoleResponse'
        type: object
      version:
        type: string
    type: object
  models.ServiceConfig:
    properties:
      config:
        $ref: '#/definitions/models.BasicConfig'
      provider:
        default: local
        description: aws|gcp|azure|local
        type: string
    type: object
  models.ServicesConfig:
    properties:
      encryption:
        allOf:
        - $ref: '#/definitions/models.ServiceConfig'
        description: Encryption - used for encrypting sensitive data
      largeLanguageModel:
        allOf:
        - $ref: '#/definitions/models.LargeLanguageModelConfig'
        description: LLM - used for large language model interactions
      scheduler:
        allOf:
        - $ref: '#/definitions/models.ServiceConfig'
        description: Scheduler - used for scheduling tasks
      temporal:
        allOf:
        - $ref: '#/definitions/models.TemporalConfig'
        description: Temporal - used for workflow processing and orchestration
      vault:
        allOf:
        - $ref: '#/definitions/models.ServiceConfig'
        description: Vault - used for storing sensitive data
    type: object
  models.SessionCreateRequest:
    properties:
      provider:
        description: Provider ID
        type: string
      session:
        description: Encoded session token
        type: string
    required:
    - provider
    - session
    type: object
  models.TemporalConfig:
    properties:
      apiKey:
        type: string
      host:
        default: localhost
        type: string
      mtlsCertificate:
        type: string
      mtlsCertificatePath:
        type: string
      namespace:
        default: default
        type: string
      port:
        default: 7233
        type: integer
    type: object
  models.WorkflowExecutionInfo:
    properties:
      approved:
        description: nil = pending approval, true = approved, false = denied
        type: boolean
      context: {}
      duration:
        description: Duration in seconds
        type: integer
      finished_at:
        type: string
      history:
        description: History of state transitions
        items:
          type: string
        type: array
      id:
        type: string
      identities:
        items:
          type: string
        type: array
      input:
        description: Context
      name:
        description: SearchAttributes are the custom search attributes associated
          with the workflow
        type: string
      output: {}
      reason:
        type: string
      role:
        type: string
      run:
        type: string
      started_at:
        type: string
      status:
        type: string
      task:
        type: string
      user:
        type: string
    type: object
  models.WorkflowResponse:
    properties:
      description:
        type: string
      enabled:
        type: boolean
      name:
        type: string
    type: object
  models.WorkflowsResponse:
    properties:
      version:
        type: string
      workflows:
        additionalProperties:
          $ref: '#/definitions/models.WorkflowResponse'
        type: object
    type: object
  sessions.LoginServer:
    properties:
      sessions:
        additionalProperties:
          $ref: '#/definitions/models.LocalSession'
        type: object
      timestamp:
        type: string
      version:
        default: "1.0"
        description: Map of session ID to Session object
        type: string
    type: object
  time.Duration:
    enum:
    - -9223372036854775808
    - 9223372036854775807
    - 1
    - 1000
    - 1000000
    - 1000000000
    - 60000000000
    - 3600000000000
    format: int64
    type: integer
    x-enum-varnames:
    - minDuration
    - maxDuration
    - Nanosecond
    - Microsecond
    - Millisecond
    - Second
    - Minute
    - Hour
host: localhost:8080
info:
  contact:
    email: support@thand.io
    name: Thand Support
    url: https://thand.io/support
  description: Thand Agent API for managing access, roles, workflows, and providers
  license:
    name: BSL
    url: https://mariadb.com/bsl11/
  termsOfService: https://thand.io/terms
  title: Thand Agent API
  version: "1.0"
paths:
  /auth:
    get:
      consumes:
      - application/json
      description: Display the authentication page with available providers
      parameters:
      - description: Callback URL
        in: query
        name: callback
        type: string
      - description: Provider name for direct authentication
        in: query
        name: provider
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: Authentication page
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
      summary: Authentication page
      tags:
      - auth
  /auth/callback/{provider}:
    get:
      consumes:
      - application/json
      description: Handle the OAuth2 callback from the provider
      parameters:
      - description: Provider name
        in: path
        name: provider
        required: true
        type: string
      - description: OAuth state
        in: query
        name: state
        required: true
        type: string
      - description: OAuth code
        in: query
        name: code
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Authentication successful
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
      summary: Authentication callback
      tags:
      - auth
  /auth/logout:
    get:
      consumes:
      - application/json
      description: Clear the user session and logout
      produces:
      - application/json
      responses:
        "200":
          description: Logged out successfully
          schema:
            additionalProperties: true
            type: object
        "307":
          description: Redirect to home page
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Logout
      tags:
      - auth
  /auth/logout/{provider}:
    get:
      consumes:
      - application/json
      description: Clear the user session and logout
      parameters:
      - description: Provider name
        in: path
        name: provider
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Logged out successfully
          schema:
            additionalProperties: true
            type: object
        "307":
          description: Redirect to home page
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Logout
      tags:
      - auth
  /auth/request/{provider}:
    get:
      consumes:
      - application/json
      description: Start the OAuth2 authentication flow for a provider
      parameters:
      - description: Provider name
        in: path
        name: provider
        required: true
        type: string
      - description: Callback URL
        in: query
        name: callback
        type: string
      produces:
      - application/json
      responses:
        "307":
          description: Redirect to provider authentication
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Provider not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Initiate authentication
      tags:
      - auth
  /elevate:
    get:
      consumes:
      - application/json
      description: Request elevation to a specific role with static parameters
      parameters:
      - description: Role name
        in: query
        name: role
        required: true
        type: string
      - description: Provider name
        in: query
        name: provider
        required: true
        type: string
      - description: Reason for elevation
        in: query
        name: reason
        required: true
        type: string
      - description: Duration of elevation
        in: query
        name: duration
        type: string
      - description: Workflow name
        in: query
        name: workflow
        type: string
      - description: Identity filter
        in: query
        name: identities
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Elevation request submitted
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
      summary: Request role elevation
      tags:
      - elevate
    post:
      consumes:
      - application/json
      - application/x-www-form-urlencoded
      - multipart/form-data
      description: Submit an elevation request with dynamic or static parameters
      parameters:
      - description: Elevation request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.ElevateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Elevation request submitted
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
      summary: Submit elevation request
      tags:
      - elevate
  /elevate/llm:
    get:
      consumes:
      - application/json
      description: Request elevation using natural language reasoning with LLM
      parameters:
      - description: Natural language reason for elevation
        in: query
        name: reason
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: LLM response with suggested role
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
      summary: LLM-based elevation
      tags:
      - elevate
    post:
      consumes:
      - application/json
      description: Request elevation using natural language with POST request
      parameters:
      - description: LLM elevation request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.ElevateLLMRequest'
      produces:
      - application/json
      responses:
        "200":
          description: LLM response with suggested role
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
      summary: LLM-based elevation (POST)
      tags:
      - elevate
  /elevate/resume:
    get:
      consumes:
      - application/json
      description: Resume a paused or interrupted elevation workflow
      parameters:
      - description: Workflow state token
        in: query
        name: state
        required: true
        type: string
      produces:
      - application/json
      responses:
        "307":
          description: Redirect to next workflow step
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
      summary: Resume elevation workflow
      tags:
      - elevate
    post:
      consumes:
      - application/json
      description: Resume a paused elevation workflow with POST data
      parameters:
      - description: Resume request data
        in: body
        name: request
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "307":
          description: Redirect to next workflow step
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
      summary: Resume elevation workflow (POST)
      tags:
      - elevate
  /execution:
    post:
      consumes:
      - application/json
      description: Create and start a new workflow execution
      parameters:
      - description: Workflow creation request
        in: body
        name: workflow
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Workflow created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Create workflow execution
      tags:
      - executions
  /execution/{id}:
    get:
      consumes:
      - application/json
      description: Retrieve detailed information about a specific workflow execution
      parameters:
      - description: Workflow execution ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Workflow execution details
          schema:
            $ref: '#/definitions/daemon.ExecutionStatePageData'
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get workflow execution
      tags:
      - executions
  /execution/{id}/cancel:
    get:
      consumes:
      - application/json
      description: Gracefully cancel a running workflow execution
      parameters:
      - description: Workflow execution ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Workflow cancelled
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Workflow not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Cancel workflow execution
      tags:
      - executions
  /execution/{id}/signal:
    get:
      consumes:
      - application/json
      description: Send a signal event to a running workflow execution
      parameters:
      - description: Workflow execution ID
        in: path
        name: id
        required: true
        type: string
      - description: Encoded signal data
        in: query
        name: input
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Signal sent successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Signal workflow execution
      tags:
      - executions
  /execution/{id}/terminate:
    get:
      consumes:
      - application/json
      description: Forcefully terminate a running workflow execution
      parameters:
      - description: Workflow execution ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Workflow terminated
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Workflow not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Terminate workflow execution
      tags:
      - executions
  /executions:
    get:
      consumes:
      - application/json
      description: Get a list of all running workflow executions for the authenticated
        user
      produces:
      - application/json
      responses:
        "200":
          description: List of workflow executions
          schema:
            $ref: '#/definitions/daemon.ExecutionsPageData'
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List workflow executions
      tags:
      - executions
  /health:
    get:
      consumes:
      - application/json
      description: Get the health status of the service and its dependencies
      produces:
      - application/json
      responses:
        "200":
          description: Health status
          schema:
            $ref: '#/definitions/models.HealthResponse'
      summary: Health check
      tags:
      - health
  /identities:
    get:
      consumes:
      - application/json
      description: Get a list of available identities from all identity providers
      parameters:
      - description: Filter query
        in: query
        name: q
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of identities
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List identities
      tags:
      - identities
  /metrics:
    get:
      consumes:
      - application/json
      description: Get service metrics including uptime, request counts, and resource
        counts
      produces:
      - application/json
      responses:
        "200":
          description: Service metrics
          schema:
            $ref: '#/definitions/models.MetricsInfo'
      summary: Service metrics
      tags:
      - metrics
  /provider/{provider}:
    get:
      consumes:
      - application/json
      description: Retrieve detailed information about a specific provider
      parameters:
      - description: Provider name
        in: path
        name: provider
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Provider details
          schema:
            $ref: '#/definitions/models.ProviderResponse'
        "404":
          description: Provider not found
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get provider by name
      tags:
      - providers
  /provider/{provider}/authorizeSession:
    post:
      consumes:
      - application/json
      description: Authorize a session with a specific provider
      parameters:
      - description: Provider name
        in: path
        name: provider
        required: true
        type: string
      - description: Authorization request
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/models.AuthorizeUser'
      produces:
      - application/json
      responses:
        "200":
          description: Authorization response
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Provider not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Authorize provider session
      tags:
      - providers
  /provider/{provider}/permissions:
    get:
      consumes:
      - application/json
      description: Get a list of permissions available in a specific provider
      parameters:
      - description: Provider name
        in: path
        name: provider
        required: true
        type: string
      - description: Filter query
        in: query
        name: q
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Provider permissions
          schema:
            $ref: '#/definitions/models.ProviderPermissionsResponse'
        "404":
          description: Provider not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List provider permissions
      tags:
      - providers
  /provider/{provider}/roles:
    get:
      consumes:
      - application/json
      description: Get a list of roles available in a specific provider
      parameters:
      - description: Provider name
        in: path
        name: provider
        required: true
        type: string
      - description: Filter query
        in: query
        name: q
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Provider roles
          schema:
            $ref: '#/definitions/models.ProviderRolesResponse'
        "404":
          description: Provider not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List provider roles
      tags:
      - providers
  /providers:
    get:
      consumes:
      - application/json
      description: Get a list of all available providers with optional capability
        filtering
      parameters:
      - description: Comma-separated list of capabilities to filter by
        in: query
        name: capability
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of providers
          schema:
            $ref: '#/definitions/models.ProvidersResponse'
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List providers
      tags:
      - providers
  /ready:
    get:
      consumes:
      - application/json
      description: Check if the service is ready to accept requests
      produces:
      - application/json
      responses:
        "200":
          description: Ready status
          schema:
            additionalProperties: true
            type: object
      summary: Readiness check
      tags:
      - health
  /register:
    post:
      consumes:
      - application/json
      description: Register a new agent with the server
      parameters:
      - description: Registration request
        in: body
        name: registration
        required: true
        schema:
          $ref: '#/definitions/config.RegistrationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Registration successful
          schema:
            $ref: '#/definitions/config.RegistrationResponse'
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
      summary: Register agent
      tags:
      - registration
  /role/{role}:
    get:
      consumes:
      - application/json
      description: Retrieve detailed information about a specific role
      parameters:
      - description: Role name
        in: path
        name: role
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Role details
          schema:
            $ref: '#/definitions/models.RoleResponse'
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Role not found
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get role by name
      tags:
      - roles
  /roles:
    get:
      consumes:
      - application/json
      description: Get a list of all available roles with optional provider filtering
      parameters:
      - description: Comma-separated list of providers to filter by
        in: query
        name: provider
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of roles
          schema:
            $ref: '#/definitions/models.RolesResponse'
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List roles
      tags:
      - roles
  /session/{provider}:
    delete:
      consumes:
      - application/json
      description: Remove a session for a specific provider
      parameters:
      - description: Provider name
        in: path
        name: provider
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Session deleted successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Delete session
      tags:
      - sessions
    get:
      consumes:
      - application/json
      description: Retrieve session information for a specific provider
      parameters:
      - description: Provider name
        in: path
        name: provider
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Session information
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Session not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get session by provider
      tags:
      - sessions
  /sessions:
    get:
      consumes:
      - application/json
      description: Retrieve all active sessions for the user
      produces:
      - application/json
      responses:
        "200":
          description: List of sessions
          schema:
            $ref: '#/definitions/sessions.LoginServer'
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get all sessions
      tags:
      - sessions
    post:
      consumes:
      - application/json
      description: Create a new session with the provided session token
      parameters:
      - description: Session creation request
        in: body
        name: session
        required: true
        schema:
          $ref: '#/definitions/models.SessionCreateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Session created successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Create a new session
      tags:
      - sessions
  /sync:
    get:
      consumes:
      - application/json
      description: Get the current sync status and version information
      produces:
      - application/json
      responses:
        "200":
          description: Sync status
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Sync status
      tags:
      - sync
  /workflow/{name}:
    get:
      consumes:
      - application/json
      description: Retrieve detailed information about a specific workflow
      parameters:
      - description: Workflow name
        in: path
        name: name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Workflow details
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Workflow not found
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get workflow by name
      tags:
      - workflows
  /workflows:
    get:
      consumes:
      - application/json
      description: Get a list of all available workflows
      produces:
      - application/json
      responses:
        "200":
          description: List of workflows
          schema:
            $ref: '#/definitions/models.WorkflowsResponse'
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List workflows
      tags:
      - workflows
schemes:
- http
- https
securityDefinitions:
  BearerAuth:
    description: Bearer token authentication
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
